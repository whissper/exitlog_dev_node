(window["webpackJsonpexitlog-frontend"]=window["webpackJsonpexitlog-frontend"]||[]).push([[0],Array(52).concat([function(e,a,t){e.exports=t(111)},,,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(13),c=t.n(o),l=(t(57),t(58),t(2)),s=t.n(l),i=t(11),u=(t(60),t(9)),d=r.a.createContext(null);function m(e,a){switch(a.type){case"setIsLoad":return Object(u.a)({},e,{isLoad:a.isLoad});case"setPanelData":return Object(u.a)({},e,{panelData:a.panelData});case"alertInvalidCredentials":return window.alert("Wrong Login data"),e;default:return e}}var p=function(e){return Object(n.useReducer)(m,e)};var f=function(e,a){var t,n,r,o,c,l=arguments;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=l.length>2&&void 0!==l[2]?l[2]:function(){},n=l.length>3&&void 0!==l[3]?l[3]:function(){},r=null,o="/exitlog_dev/"+e,t(),i.prev=5,i.next=8,s.a.awrap(fetch(o,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}));case 8:r=i.sent,i.next=15;break;case 11:return i.prev=11,i.t0=i.catch(5),n(),i.abrupt("return","ERROR_FETCH|"+i.t0);case 15:if(!r.ok){i.next=23;break}return i.next=18,s.a.awrap(r.text());case 18:return c=i.sent,n(),i.abrupt("return",c);case 23:return n(),i.abrupt("return","ERROR_HTTP|"+r.status+" -- "+r.statusText);case 25:case"end":return i.stop()}}),null,null,[[5,11]])};var E=function(e){var a=!1,t=e||{};if(t.message="undefined"===typeof t.message?"DEFAULT_MESSAGE":t.message,t.methodName="undefined"===typeof t.methodName?"DEFAULT_METHOD":t.methodName,t.representError="undefined"===typeof t.representError?function(e){alert(e)}:t.representError,"ERROR_ACCESS_DENIED"===t.message)a=!0,t.representError("access denied : method -- "+t.methodName);else if(-1!==t.message.indexOf("ERROR_PDO")){a=!0;var n=t.message.split("|");t.representError("PDO Error: ("+n[1]+") : method -- "+t.methodName)}else if("CHANGE_IMPOSSIBLE"===t.message)a=!0,t.representError("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\\\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e");else if("ERROR_POSTDATA_INCORRECT"===t.message)a=!0,t.representError("postdata is incorrect : method -- "+t.methodName);else if(-1!==t.message.indexOf("ERROR_FETCH")){a=!0;var r=t.message.split("|");t.representError("can't fetch data: "+r[1])}else if(-1!==t.message.indexOf("ERROR_HTTP")){a=!0;var o=t.message.split("|");t.representError("http error: "+o[1])}else if(-1!==t.message.indexOf("ERROR_TIME")){a=!0;var c=t.message.split("|");t.representError(c[1])}else if(-1!==t.message.indexOf("ERROR_WS")){a=!0;var l=t.message.split("|");t.representError("Web service call error: "+l[1])}else if(-1!==t.message.indexOf("ERROR_SOAP")){a=!0;var s=t.message.split("|");t.representError("SOAP Web service call error: "+s[1])}else if(-1!==t.message.indexOf("ERROR_JAVA")){a=!0;var i=t.message.split("|");t.representError("Java runtime error: "+i[1])}return a},b=(t(61),t(113)),v=t(114),g=t(46),h=t(6),w=t(41);var x=function(e){return r.a.createElement(b.a,{fluid:!0,className:"sav2-top-header"},r.a.createElement(v.a,null,r.a.createElement(g.a,{className:"justify-content-center align-self-center"},"EXIT-LOG"),r.a.createElement(g.a,{xs:"auto",className:"justify-content-center align-self-center"}," v 0.8.1"),r.a.createElement(g.a,{xs:"auto",className:"justify-content-center align-self-center"},r.a.createElement(h.a,{icon:w.b,size:"3x"})),r.a.createElement(g.a,{xs:"auto",className:"justify-content-center align-self-center"},r.a.createElement(h.a,{icon:w.a,size:"4x"}))))},y=(t(67),t(7));var D=function(e){var a=e.isLoading,t={visibility:a?"visible":"hidden",opacity:a?"1":"0"};return r.a.createElement("div",{id:"light_cover",style:t},r.a.createElement("div",{className:"light_cover_info"},r.a.createElement(h.a,{icon:y.r,size:"5x",spin:!0}),r.a.createElement("span",{className:"sr-only"},"Loading...")))},j=(t(68),t(12)),O=(t(69),t(123)),k=t(115);var I=function(e){var a=Object(n.useContext)(d),t=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],o=Object(n.useState)({id:"isuservalid",usr:"",pwd:"",grr:""}),c=Object(i.a)(o,2),l=c[0],m=c[1],p=function(e){var a=e.target.name,t=e.target.value;m((function(e){return Object(u.a)({},e,Object(j.a)({},a,t))}))},b=function(e){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(13!==e.charCode){a.next=6;break}return a.next=4,s.a.awrap(w());case 4:h(a.sent);case 6:case"end":return a.stop()}}))};function h(e){var n,r,o;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(null===e){c.next=11;break}if(!(n=JSON.parse(e)).isvalid){c.next=10;break}return c.next=5,s.a.awrap(f.apply(void 0,["load_workspace",{userid:n.userid,userrole:n.userrole}].concat(t)));case 5:r=c.sent,E({message:r,methodName:"LoginForm.loadWorkspace()"})||(o=JSON.parse(r),a({type:"setPanelData",panelData:o})),c.next=11;break;case 10:a({type:"alertInvalidCredentials"});case 11:case"end":return c.stop()}}))}function w(){var e;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(f.apply(void 0,["login",l].concat(t)));case 2:if(e=a.sent,E({message:e,methodName:"LoginForm.doLogin()"})){a.next=8;break}return a.abrupt("return",e);case 8:return a.abrupt("return",null);case 9:case"end":return a.stop()}}))}return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Login:"),r.a.createElement(O.a.Control,{type:"text",name:"usr",onChange:p,onKeyPress:b})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Password:"),r.a.createElement(O.a.Control,{type:"password",name:"pwd",onChange:p,onKeyPress:b})),r.a.createElement(k.a,{variant:"primary",size:"lg",block:!0,onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(w());case 2:h(e.sent);case 4:case"end":return e.stop()}}))}},"\u0412\u0445\u043e\u0434")))},R=(t(72),t(24)),C=r.a.createContext(null);function N(e,a){switch(a.type){case"setInfoBox":return Object(u.a)({},e,{infoBox:a.infoBoxData});case"setPanelTabs":return Object(u.a)({},e,{panelTabs:a.panelTabs});case"setPaginators":return Object(u.a)({},e,{paginators:Object(u.a)({},e.paginators,{},a.paginators)});case"setPointsData":return Object(u.a)({},e,{pointsData:a.pointsData});case"setNewRecordData":return Object(u.a)({},e,{newRecordData:Object(u.a)({},e.newRecordData,{},a.newRecordData)});case"addExitObject":return Object(u.a)({},e,{newRecordData:Object(u.a)({},e.newRecordData,{objects:[].concat(Object(R.a)(e.newRecordData.objects),[a.addedObject])})});case"deleteExitObject":var t=e.newRecordData.objects.filter((function(e){return e.objectIndex!==a.objectIndex}));return Object(u.a)({},e,{newRecordData:Object(u.a)({},e.newRecordData,{objects:t})});case"updateExitObject":var n=[];return e.newRecordData.objects.forEach((function(e){e.objectIndex!==a.object.objectIndex?n.push(e):n.push({objectIndex:a.object.objectIndex,fields:Object(u.a)({},e.fields,{},a.object.fields)})})),Object(u.a)({},e,{newRecordData:Object(u.a)({},e.newRecordData,{objects:n})});case"setInsertNewRecordModal":return Object(u.a)({},e,{insertNewRecordModal:Object(u.a)({},e.insertNewRecordModal,{},a.insertNewRecordModalData)});case"setLogData":return Object(u.a)({},e,{logData:a.logData});case"setLogSearchFields":return Object(u.a)({},e,{logSearchFields:Object(u.a)({},e.logSearchFields,{},a.logSearchFields)});case"setDeleteRecordModal":return Object(u.a)({},e,{deleteRecordModal:Object(u.a)({},e.deleteRecordModal,{},a.deleteRecordModalData)});case"setUpdateRecordModal":return Object(u.a)({},e,{updateRecordModal:Object(u.a)({},e.updateRecordModal,{},a.updateRecordModalData)});case"setUsersData":return Object(u.a)({},e,{usersData:a.usersData});case"setUsersSearchFields":return Object(u.a)({},e,{usersSearchFields:Object(u.a)({},e.usersSearchFields,{},a.usersSearchFields)});case"setLockUserModal":return Object(u.a)({},e,{lockUserModal:Object(u.a)({},e.lockUserModal,{},a.lockUserModalData)});case"setUpdateUserModal":return Object(u.a)({},e,{updateUserModal:Object(u.a)({},e.updateUserModal,{},a.updateUserModalData)});default:return e}}var L=function(e){return Object(n.useReducer)(N,e)},M=(t(73),t(116));var P=function(e){var a=Object(n.useContext)(d),t=Object(n.useContext)(C),o=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],c=e.data,l=e.panelData,i=function(e){var a=e.target.id,n={};for(var r in c)n[r]=r===a;t({type:"setPanelTabs",panelTabs:n})};return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(M.a,{className:"flex-wrap"},r.a.createElement(k.a,{variant:"outline-secondary",active:c.showNewRecordTab,onClick:i,id:"showNewRecordTab"},"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c"),r.a.createElement(k.a,{variant:"outline-secondary",active:c.showLogTab,onClick:i,id:"showLogTab"},"\u0416\u0443\u0440\u043d\u0430\u043b"),r.a.createElement(k.a,{variant:"outline-secondary",active:c.showUsersTab,onClick:i,id:"showUsersTab"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),r.a.createElement(k.a,{variant:"outline-info",onClick:function(){window.location="http://kom-es01-app25:8888/docx/"}},"\u0410\u043a\u0442 \u043e\u0431\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),(2===l.depID||3===l.depID)&&r.a.createElement(k.a,{variant:"outline-info",onClick:function(){window.location="http://kom-es01-app25:8888/acts/"}},"\u0411\u043b\u0430\u043d\u043a\u0438 \u0423\u0445\u0442\u0430"),r.a.createElement(k.a,{variant:"primary",onClick:function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(f.apply(void 0,["logout",{id:"0"}].concat(o)));case 2:e=t.sent,E({message:e,methodName:"MainInspectorPanel.MainMenu.logoutIsClicked()"})||a({type:"setPanelData",panelData:{panelID:"0",userID:"",userFIO:"",depID:"",depName:""}});case 5:case"end":return t.stop()}}))}},"\u0412\u044b\u0439\u0442\u0438"))))},S=(t(74),t(117)),T=t(29);var _=function(e){var a=Object(n.useContext)(C),t=e.data,o=t.variant,c=t.text,l=t.show,s=T.a;switch(o){case"danger":s=T.a;break;case"info":s=y.i;break;case"success":s=y.d;break;default:s=y.i}return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(S.a,{variant:o,dismissible:!0,onClose:function(){a({type:"setInfoBox",infoBoxData:Object(u.a)({},e.data,{show:!1})})},show:l},r.a.createElement(h.a,{icon:s,size:"lg"}),"\xa0",c)))},F=(t(75),t(76),t(118)),U=t(47);var B=function(e){var a=e.data;return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:4},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.t,size:"1x"}),"\xa0\xa0\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\xa0:")),r.a.createElement(U.a,{disabled:!0,value:a.userFIO}))),r.a.createElement(g.a,{lg:8},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.a,size:"1x"}),"\xa0\xa0\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435\xa0:")),r.a.createElement(U.a,{disabled:!0,value:a.depName}))))))},z=(t(77),t(78),t(48)),A=t.n(z);t(79);var G=function(e){var a=Object(n.useRef)(null),t=e.panelData,o=e.objectIndex,c=e.data,l=e.onObjectUpdate,s=e.onObjectDelete,i="",u="";c.forEach((function(e){e.objectIndex===o&&(i=e.fields.name,u=e.fields.note)}));var d={kladr_id:"1100000100000"},m={kladr_id:"1100000800000"},p={kladr_id:"1100000600000"},f={kladr_id:"1100000400000"};return r.a.createElement(g.a,{lg:12},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,r.a.createElement(h.a,{icon:y.m,size:"1x"}),"\xa0\u041e\u0431\u044a\u0435\u043a\u0442 \u0432\u044b\u0445\u043e\u0434\u0430 :"),r.a.createElement(F.a,null,r.a.createElement(A.a,{name:"objectName",ref:a,token:"aa87679e3bfbbdaca05a44aa93ad6af10d54045a",count:7,placeholder:"\u0410\u0434\u0440\u0435\u0441",query:i,geolocation:!1,specialRequestOptions:function(){var e={locations_boost:[d]};return 2===t.depID?e={locations_boost:[m]}:3===t.depID?e={locations_boost:[p]}:4===t.depID&&(e={locations_boost:[f]}),e}(),onSelect:function(e){var a=function(e,a){var t=a||", ";return e.filter((function(e){return e})).join(t)},t=e.value.trim(),n=e.data.postal_code,r=a([a([e.data.region_type,e.data.region]," "),a([e.data.area_type,e.data.area]," ")]),c=a([a([e.data.city_type,e.data.city]," "),a([e.data.settlement_type,e.data.settlement]," ")]),s=a([e.data.street_type,e.data.street]," "),i=a([a([e.data.house_type,e.data.house]," "),a([e.data.block_type,e.data.block]," ")]),u=a([e.data.flat_type,e.data.flat]," "),d="5"!==e.data.qc_geo?e.data.geo_lat:"",m="5"!==e.data.qc_geo?e.data.geo_lon:"",p=""===s.trim()||""===i.trim()?"1":"0";l({objectIndex:o,fields:{name:t,postalindex:n,region:r,town:c,street:s,building:i,apartment:u,geolat:d,geolon:m,oldformat:p}})},onBlur:function(e){var a=e.target.value;l({objectIndex:o,fields:{name:a}})},onChange:function(e){l({objectIndex:o,fields:{name:e}})}}),r.a.createElement(F.a.Append,null,r.a.createElement(k.a,{variant:"outline-secondary",onClick:function(){s(o)}},r.a.createElement(h.a,{icon:y.n}))))),r.a.createElement(O.a.Control,{as:"input",type:"text",placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",className:"mb-3",name:"objectNote",value:u,onChange:function(e){var a=e.target.value;l({objectIndex:o,fields:{note:a}})}}))},J=t(17),H=t.n(J);var V=function(e){var a=Object(n.useContext)(C),t=e.panelData,o=e.pointsData,c=e.data,l=Object(n.useRef)(null),i=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=function(e){var a=e.value.replace(/_/g,"0").split(":");parseInt(a[0])>18&&(a[0]="18"),parseInt(a[0])<9&&(a[0]="09"),parseInt(a[1])>59&&(a[1]="59"),e.value=a[0]+":"+a[1];var t=new Event("change",{bubbles:!0});e.dispatchEvent(t)},a=l.current,t=i.current;return H()({mask:"99:99",greedy:!1,oncomplete:function(){e(a)},onincomplete:function(){e(a)}}).mask(a),H()({mask:"99:99",greedy:!1,oncomplete:function(){e(t)},onincomplete:function(){e(t)}}).mask(t),function(){H.a.remove(a),H.a.remove(t)}}),[]);var u=function(e){var t,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.target.name,n=e.target.value,r.next=4,s.a.awrap(a({type:"setNewRecordData",newRecordData:Object(j.a)({},t,n)}));case 4:"pointid"===t&&"5"!==n&&a({type:"setNewRecordData",newRecordData:{point_description:""}});case 5:case"end":return r.stop()}}))},d=function(e){a({type:"updateExitObject",object:e})},m=function(e){a({type:"deleteExitObject",objectIndex:e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:6},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,r.a.createElement(h.a,{icon:y.p,size:"1x"}),"\xa0\u0426\u0435\u043b\u044c \u0432\u044b\u0445\u043e\u0434\u0430 :"),r.a.createElement(O.a.Control,{as:"select",name:"pointid",value:c.pointid,onChange:u},function(){var e=[];return 0!==o.length&&o.forEach((function(a){e.push(r.a.createElement("option",{key:a.id.toString(),value:a.id.toString()},a.name))})),e.push(r.a.createElement("option",{key:"5",value:"5"},"\u0414\u0440\u0443\u0433\u043e\u0435:")),e}()),r.a.createElement("br",null),"5"===c.pointid&&r.a.createElement(O.a.Control,{as:"input",type:"text",name:"point_description",value:c.point_description,onChange:u}))),r.a.createElement(g.a,{lg:6},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,r.a.createElement(h.a,{icon:y.e,size:"1x"}),"\xa0\u0412\u0440\u0435\u043c\u044f :"),r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,"\u0441\xa0:")),r.a.createElement(O.a.Control,{as:"input",type:"text",name:"time_exit",value:c.time_exit,onChange:u,ref:l,placeholder:"00:00"}),r.a.createElement("div",{className:"input-group-prepend input-group-append"},r.a.createElement(F.a.Text,null,"\u0434\u043e\xa0:")),r.a.createElement(O.a.Control,{as:"input",type:"text",name:"time_return",value:c.time_return,onChange:u,ref:i,placeholder:"00:00"})))),r.a.createElement(g.a,{lg:12},r.a.createElement("hr",null)),r.a.createElement(g.a,{lg:6},r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.l,size:"1x"}))),r.a.createElement(O.a.Control,{as:"input",type:"text",disabled:!0,value:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b :"}),r.a.createElement(F.a.Append,null,r.a.createElement(k.a,{variant:"outline-secondary",onClick:function(){var e=1;if(0!==c.objects.length){var t=c.objects.map((function(e){return e.objectIndex}));e=Math.max.apply(Math,Object(R.a)(t))+1}a({type:"addExitObject",addedObject:{objectIndex:e,fields:{name:"",note:"",postalindex:"",region:"",town:"",street:"",building:"",apartment:"",geolat:"",geolon:"",oldformat:"1"}}})}},r.a.createElement(h.a,{icon:y.q}))))),r.a.createElement(g.a,{lg:12},r.a.createElement("br",null)),c.objects.map((function(e){return r.a.createElement(G,{key:e.objectIndex.toString(),panelData:t,objectIndex:e.objectIndex,data:c.objects,onObjectUpdate:d,onObjectDelete:m})})),r.a.createElement(g.a,{lg:12},r.a.createElement("hr",null)),r.a.createElement(g.a,{lg:12},r.a.createElement(k.a,{variant:"primary",size:"lg",onClick:function(){a({type:"setInsertNewRecordModal",insertNewRecordModalData:{show:!0}})}},"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"))))},W=(t(84),t(122)),Q=t(119),q=t(124),K=t(120),X=t(121);function Y(e){return null===e?"":e}var Z=function(e){return[Y(e.name),Y(e.note),Y(e.postalindex),Y(e.region),Y(e.town),Y(e.street),Y(e.building),Y(e.apartment),Y(e.geolat),Y(e.geolon),Y(e.oldformat)]};var $=function(e){var a=Object(n.useContext)(C),t=Object(n.useContext)(d),o=[function(){t({type:"setIsLoad",isLoad:!0})},function(){t({type:"setIsLoad",isLoad:!1})}],c=e.data,l=e.newRecordData,i=e.panelData,u=function(){a({type:"setInsertNewRecordModal",insertNewRecordModalData:{show:!1}})},m=e.pointsData.find((function(e){return e.id===parseInt(l.pointid)}));return r.a.createElement(W.a,{show:c.show,onHide:u},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0436\u0443\u0440\u043d\u0430\u043b")),r.a.createElement(W.a.Body,null,r.a.createElement("p",null,"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438:"),r.a.createElement(Q.a,{bordered:!0,hover:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a:"),r.a.createElement("td",null,i.userFIO)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0426\u0435\u043b\u044c \u0432\u044b\u0445\u043e\u0434\u0430:"),r.a.createElement("td",null,m?m.name.trim():"\u0414\u0440\u0443\u0433\u043e\u0435: ",l.point_description)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0445\u043e\u0434\u0430:"),r.a.createElement("td",null,l.time_exit)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430:"),r.a.createElement("td",null,l.time_return)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u041e\u0431\u044a\u0435\u043a\u0442\u044b:"),r.a.createElement("td",null,r.a.createElement("ul",null,l.objects.map((function(e){return r.a.createElement("li",{key:e.objectIndex.toString()},e.fields.name.trim(),"\xa0",""!==e.fields.note.trim()&&r.a.createElement(q.a,{placement:"top",overlay:r.a.createElement(K.a,{id:e.objectIndex.toString()},e.fields.note.trim())},r.a.createElement(X.a,{variant:"info",className:"note-label"},r.a.createElement(h.a,{icon:y.f}),"\xa0",e.fields.note.trim())))})))))))),r.a.createElement(W.a.Footer,null,r.a.createElement(k.a,{variant:"primary",onClick:function(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={userid:l.userid.toString(),pointid:l.pointid,point_description:l.point_description,time_exit:l.time_exit,time_return:l.time_return,objects:l.objects.map((function(e){return Z(e.fields)}))},n.next=3,s.a.awrap(f.apply(void 0,["insert_newrecord",{newRecordJSON:JSON.stringify(e)}].concat(o)));case 3:return t=n.sent,n.next=6,s.a.awrap(a({type:"setNewRecordData",newRecordData:{pointid:"1",point_description:"",time_exit:"",time_return:"",objects:[]}}));case 6:a({type:"setInsertNewRecordModal",insertNewRecordModalData:{show:!1}}),E({message:t,methodName:"InsertNewRecordModal.handleAdd()",representError:function(e){a({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||a({type:"setInfoBox",infoBoxData:{variant:"success",text:t,show:!0}});case 9:case"end":return n.stop()}}))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(k.a,{variant:"secondary",onClick:u},"\u041e\u0442\u043c\u0435\u043d\u0430")))};var ee=function(e){var a=e.panelData,t=e.pointsData,n=e.newRecordData,o=e.insertNewRecordModalData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{data:a}),r.a.createElement("hr",null),r.a.createElement(V,{panelData:a,pointsData:t,data:n}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement($,{data:o,newRecordData:n,panelData:a,pointsData:t}))};t(86),t(87);function ae(e){return 1===e.toString().length?"0"+e.toString():e.toString()}var te=function(e){var a=e.getDate(),t=e.getMonth()+1,n=e.getFullYear();return ae(a)+"-"+ae(t)+"-"+n};var ne=function(e){var a=Object(n.useContext)(d),t=Object(n.useContext)(C),o=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],c=e.data,l=new Date;l.setDate(l.getDate()-7);var m=Object(n.useState)({from:te(l),till:te(new Date)}),p=Object(i.a)(m,2),b=p[0],w=p[1],x=Object(n.useRef)(null),D=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=[x.current,D.current];return e.forEach((function(e){window.jQuery(e).on("change",I)})),function(){e.forEach((function(e){window.jQuery(e).off("change",I)}))}}),[]),Object(n.useEffect)((function(){var e=[x.current,D.current];return e.forEach((function(e){window.jQuery(e).datepicker({format:"dd-mm-yyyy",viewMode:"months",minViewMode:"days",language:"ru"})})),function(){e.forEach((function(e){window.jQuery(e).datepicker("destroy")}))}}),[]);var I=function(e){var a=e.target.name,t=e.target.value,n=window.jQuery(x.current).datepicker("getDate")||l,r=window.jQuery(D.current).datepicker("getDate")||new Date;w(n>r?function(e){return{from:t,till:t}}:function(e){return Object(u.a)({},e,Object(j.a)({},a,t))})};return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:4},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.t,size:"1x"}),"\xa0\xa0\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\xa0:")),r.a.createElement(U.a,{disabled:!0,value:c.userFIO}))),r.a.createElement(g.a,{lg:8},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.a,size:"1x"}),"\xa0\xa0\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435\xa0:")),r.a.createElement(U.a,{disabled:!0,value:c.depName}))),r.a.createElement(g.a,{lg:12},r.a.createElement("hr",null)),r.a.createElement(g.a,{lg:12},r.a.createElement("p",null,"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0432\u044b\u0445\u043e\u0434\u0430\u043c :")),r.a.createElement(g.a,{lg:6},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.b,size:"1x"}),"\xa0\xa0\u041f\u0435\u0440\u0438\u043e\u0434"),r.a.createElement(F.a.Text,null,"\u043e\u0442\xa0:")),r.a.createElement(O.a.Control,{as:"input",name:"from",type:"text",ref:x,value:b.from,onChange:I}),r.a.createElement("div",{className:"input-group-prepend input-group-append"},r.a.createElement(F.a.Text,null,"\u0434\u043e\xa0:")),r.a.createElement(O.a.Control,{as:"input",name:"till",type:"text",ref:D,value:b.till,onChange:I}))),r.a.createElement(g.a,{lg:6},r.a.createElement(k.a,{variant:"success",onClick:function(){var e,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={startDate:b.from,endDate:b.till},n.next=3,s.a.awrap(f.apply(void 0,["exitsReportSOAP",e].concat(o)));case 3:a=n.sent,E({message:a,methodName:"TabLog.Menu.handleClick()",representError:function(e){t({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||(window.location=window.location.href+a,t({type:"setInfoBox",infoBoxData:{variant:"info",text:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u0433\u0440\u0443\u0437\u0438\u043b\u0438\u0441\u044c",show:!0}}));case 6:case"end":return n.stop()}}))}},"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 Excel\xa0\xa0",r.a.createElement(h.a,{icon:y.g,size:"1x"}))))))},re=(t(88),t(125));var oe=function(e){for(var a=e.curPage,t=e.perPage,n=e.countRows,o=e.onItemClick,c=e.onPrevClick,l=e.onNextClick,s=e.onFirstClick,i=e.onLastClick,u=Math.floor(3.5),d=Math.ceil(n/t)<1?1:Math.ceil(n/t),m=function(e){var a=e.target.attributes.pagenum.value;o(parseInt(a))},p=[],f=function(){if(a-u<=1)return 1;if(a+7-u>d){var e=d-2*u;return e>0?e:1}return a-u}(),E=a-u<=1?d<7?d+1:8:a+7-u>d?d+1:a+7-u,b=f;b<E;b++)p.push(r.a.createElement(re.a.Item,{active:b===a,key:b,onClick:m,pagenum:b},b));return r.a.createElement(re.a,null,r.a.createElement(re.a.First,{onClick:function(){s(1)},disabled:1===a}),r.a.createElement(re.a.Prev,{onClick:function(){c(a-1<1?1:a-1)},disabled:1===a}),p,r.a.createElement(re.a.Next,{onClick:function(){l(a+1>d?d:a+1)},disabled:a===d}),r.a.createElement(re.a.Last,{onClick:function(){i(d)},disabled:a===d}))};t(89),t(90);var ce=function(e){var a=Object(n.useRef)(null),t=e.size,o=e.label,c=e.mask,l=e.handleSearch,s=e.name,i=e.currentVal;Object(n.useEffect)((function(){if(c&&"datepicker"===c.type){var e=a.current;return window.jQuery(e).on("change",d),function(){window.jQuery(e).off("change",d)}}}),[]),Object(n.useEffect)((function(){if(c&&"datepicker"===c.type){var e=a.current;return window.jQuery(e).datepicker(c.params),function(){window.jQuery(e).datepicker("destroy")}}}),[]),Object(n.useEffect)((function(){if(c&&"inputmask"===c.type){var e=a.current;return H()(c.params).mask(e),function(){H.a.remove(e)}}}),[]);var u=null,d=function(){clearTimeout(u),u=setTimeout((function(){l(Object(j.a)({},s,a.current.value.trim()))}),1e3)};return r.a.createElement(g.a,{lg:t,className:"sav2-mt-1"},r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,o)),r.a.createElement(U.a,{className:"no-placeholder",ref:a,onChange:d,defaultValue:i}),r.a.createElement(F.a.Append,null,r.a.createElement(k.a,{variant:"secondary",onClick:function(){var e=a.current;""!==e.value&&(e.value="",l(Object(j.a)({},s,e.value)))}},r.a.createElement(h.a,{icon:y.s,size:"1x"})))))};var le=function(e){var a=e.data,t=Object(n.useContext)(C),o=function(e){t({type:"setLogSearchFields",logSearchFields:e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043f\u0438\u0441\u0435\u0439: "),r.a.createElement(v.a,null,r.a.createElement(ce,{name:"date",size:4,label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430:",handleSearch:o,mask:{type:"datepicker",params:{format:"dd-mm-yyyy",viewMode:"months",minViewMode:"days",language:"ru"}},currentVal:a.date}),r.a.createElement(ce,{name:"objectName",size:6,label:"\u041e\u0431\u044a\u0435\u043a\u0442 \u0432\u044b\u0445\u043e\u0434\u0430:",handleSearch:o,currentVal:a.objectName}),r.a.createElement(ce,{name:"userFio",size:6,label:"\u0424\u0418\u041e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430:",handleSearch:o,currentVal:a.userFio})))};t(91);var se=function(e){var a=e.countRows;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u0435\u0439:"),r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,"\u0412\u0441\u0435\u0433\u043e \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439:")),r.a.createElement(U.a,{disabled:!0,value:a,style:{maxWidth:"200px"}})))};t(92),t(93);var ie=function(e){var a=Object(n.useContext)(C),t=e.id,o=e.day,c=e.date,l=e.userFio,s=e.objects,i=e.point,u=e.pointDescription,d=e.timeExit,m=e.timeReturn,p=e.timeDuration;return r.a.createElement("tr",null,r.a.createElement("td",null,o),r.a.createElement("td",null,c),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},l),r.a.createElement("td",null,s.map((function(e,a){return r.a.createElement("div",{className:"mb-2",key:a.toString()},e[0],"\xa0",""!==e[1]&&r.a.createElement(q.a,{placement:"right",overlay:r.a.createElement(K.a,{id:a.toString()},e[1])},r.a.createElement(X.a,{variant:"info",className:"note-label"},r.a.createElement(h.a,{icon:y.f}),"\xa0",e[1])))}))),r.a.createElement("td",null,i+(""===u?"":" "+u)),r.a.createElement("td",null,d),r.a.createElement("td",null,m),r.a.createElement("td",null,p),r.a.createElement("td",{style:{minWidth:"120px"}},r.a.createElement(k.a,{variant:"success",className:"sav2-opt-button",onClick:function(){a({type:"setUpdateRecordModal",updateRecordModalData:{show:!0,exitID:t}})},title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"},r.a.createElement(h.a,{icon:y.o,size:"1x"})),r.a.createElement(k.a,{variant:"danger",className:"sav2-opt-button",onClick:function(){a({type:"setDeleteRecordModal",deleteRecordModalData:{show:!0,exitID:t}})},title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(h.a,{icon:T.b,size:"1x"}))))};var ue=function(e){var a=e.rowItems.map((function(e){return r.a.createElement(ie,{key:e[0].toString(),id:e[0].toString(),day:e[1],date:e[2],userFio:e[3],objects:e[4],point:e[5],pointDescription:e[6],timeExit:e[7],timeReturn:e[8],timeDuration:e[9]})}));return r.a.createElement(Q.a,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0414\u0435\u043d\u044c"),r.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),r.a.createElement("th",null,"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),r.a.createElement("th",null,"\u041e\u0431\u044a\u0435\u043a\u0442\u044b"),r.a.createElement("th",null,"\u0426\u0435\u043b\u044c \u0432\u044b\u0445\u043e\u0434\u0430"),r.a.createElement("th",null,"\u0421"),r.a.createElement("th",null,"\u0414\u043e"),r.a.createElement("th",null,"\u0427\u0430\u0441\u044b"),r.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),r.a.createElement("tbody",null,a))};t(94);var de=function(e){var a=Object(n.useContext)(C),t=Object(n.useContext)(d),o=[function(){t({type:"setIsLoad",isLoad:!0})},function(){t({type:"setIsLoad",isLoad:!1})}],c=e.data,l=function(){a({type:"setDeleteRecordModal",deleteRecordModalData:{show:!1}})};return r.a.createElement(W.a,{show:c.show,onHide:l},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,null,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438")),r.a.createElement(W.a.Body,null,r.a.createElement("p",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c (\u0438 \u0432\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u043d\u0435\u0439 \u043e\u0431\u044a\u0435\u043a\u0442\u044b) \u043f\u043e\u0434 id: ",c.exitID)),r.a.createElement(W.a.Footer,null,r.a.createElement(k.a,{variant:"primary",onClick:function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(f.apply(void 0,["delete_exit",{id:c.exitID}].concat(o)));case 2:e=t.sent,a({type:"setDeleteRecordModal",deleteRecordModalData:{show:!1}}),E({message:e,methodName:"DeleteRecordModal.handleDelete()",representError:function(e){a({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||a({type:"setInfoBox",infoBoxData:{variant:"success",text:e,show:!0}});case 6:case"end":return t.stop()}}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(k.a,{variant:"secondary",onClick:l},"\u041e\u0442\u043c\u0435\u043d\u0430")))};t(95);var me=function(e){var a=Object(n.useContext)(d),t=Object(n.useContext)(C),o=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],c=e.panelData,l=e.data,m=e.pointsData,p=Object(n.useRef)(null),b=Object(n.useRef)(null),v=Object(n.useState)(""),g=Object(i.a)(v,2),w=g[0],x=g[1],D=Object(n.useState)(""),j=Object(i.a)(D,2),I=j[0],N=j[1],L=Object(n.useState)(""),M=Object(i.a)(L,2),P=M[0],S=M[1],T=Object(n.useState)(""),_=Object(i.a)(T,2),B=_[0],z=_[1],A=Object(n.useState)("5"),J=Object(i.a)(A,2),V=J[0],Q=J[1],q=Object(n.useState)(""),K=Object(i.a)(q,2),X=K[0],Y=K[1],$=Object(n.useState)([]),ee=Object(i.a)($,2),ae=ee[0],te=ee[1];Object(n.useEffect)((function(){if(l.show){var e=function(e){var a=e.value.replace(/_/g,"0").split(":");parseInt(a[0])>18&&(a[0]="18"),parseInt(a[0])<9&&(a[0]="09"),parseInt(a[1])>59&&(a[1]="59"),e.value=a[0]+":"+a[1];var t=new Event("change",{bubbles:!0});e.dispatchEvent(t)},a=p.current,t=b.current;return H()({mask:"99:99",greedy:!1,oncomplete:function(){e(a)},onincomplete:function(){e(a)}}).mask(a),H()({mask:"99:99",greedy:!1,oncomplete:function(){e(t)},onincomplete:function(){e(t)}}).mask(t),function(){H.a.remove(a),H.a.remove(t)}}}),[l.show]),Object(n.useEffect)((function(){if(l.show)return function(){var e,a,n;s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.awrap(f.apply(void 0,["select_exit_by_id",{id:l.exitID}].concat(o)));case 2:e=r.sent,E({message:e,methodName:"TabLog.UpdateRecordModal.selectExitByID()",representError:function(e){t({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||(a=JSON.parse(e),n=a.fields,x((function(e){return n.fioExitUpd})),N((function(e){return n.dateExitUpd})),S((function(e){return n.timeexitExitUpd})),z((function(e){return n.timereturnExitUpd})),Q((function(e){return n.pointExitUpd.toString()})),Y((function(e){return n.pointDescriptionExitUpd})),te((function(e){return n.objectsExitUpd.map((function(e,a){return{objectIndex:a,fields:{name:e[0],note:e[1],postalindex:e[2],region:e[3],town:e[4],street:e[5],building:e[6],apartment:e[7],geolat:e[8],geolon:e[9],oldformat:e[10].toString()}}}))})));case 5:case"end":return r.stop()}}))}(),function(){x((function(e){return""})),N((function(e){return""})),S((function(e){return""})),z((function(e){return""})),Q((function(e){return"5"})),Y((function(e){return""})),te((function(e){return[]}))}}),[l.show]);var ne=function(e){var a,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a=e.target.name,t=e.target.value,"time_exit"===a?S((function(e){return t})):"time_return"===a&&z((function(e){return t}));case 3:case"end":return n.stop()}}))},re=function(){t({type:"setUpdateRecordModal",updateRecordModalData:{show:!1}})},oe=function(e){var a=[];ae.forEach((function(t){t.objectIndex!==e.objectIndex?a.push(t):a.push({objectIndex:e.objectIndex,fields:Object(u.a)({},t.fields,{},e.fields)})})),te((function(e){return a}))},ce=function(e){var a=ae.filter((function(a){return a.objectIndex!==e}));te((function(e){return a}))};return r.a.createElement(W.a,{show:l.show,onHide:re},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,null,"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0438 \u043f\u043e \u0432\u044b\u0445\u043e\u0434\u0443")),r.a.createElement(W.a.Body,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Group,null,r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.t,size:"1x"}),"\xa0\xa0\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\xa0:")),r.a.createElement(U.a,{disabled:!0,value:w}))),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,r.a.createElement(h.a,{icon:y.c,size:"1x"}),"\xa0\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430 :"),r.a.createElement(O.a.Control,{disabled:!0,value:I})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,r.a.createElement(h.a,{icon:y.e,size:"1x"}),"\xa0\u0412\u0440\u0435\u043c\u044f :"),r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,"\u0441\xa0:")),r.a.createElement(O.a.Control,{as:"input",type:"text",name:"time_exit",value:P,onChange:ne,ref:p,placeholder:"00:00"}),r.a.createElement("div",{className:"input-group-prepend input-group-append"},r.a.createElement(F.a.Text,null,"\u0434\u043e\xa0:")),r.a.createElement(O.a.Control,{as:"input",type:"text",name:"time_return",value:B,onChange:ne,ref:b,placeholder:"00:00"}))),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,r.a.createElement(h.a,{icon:y.p,size:"1x"}),"\xa0\u0426\u0435\u043b\u044c \u0432\u044b\u0445\u043e\u0434\u0430 :"),r.a.createElement(O.a.Control,{as:"select",name:"pointid",value:V,disabled:!0},function(){var e=[];return 0!==m.length&&m.forEach((function(a){e.push(r.a.createElement("option",{key:a.id.toString(),value:a.id.toString()},a.name))})),e.push(r.a.createElement("option",{key:"5",value:"5"},"\u0414\u0440\u0443\u0433\u043e\u0435:")),e}()),r.a.createElement("br",null),"5"===V&&r.a.createElement(O.a.Control,{as:"input",type:"text",name:"point_description",value:X,disabled:!0})),r.a.createElement(O.a.Group,null,r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.l,size:"1x"}))),r.a.createElement(O.a.Control,{as:"input",type:"text",disabled:!0,value:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b :"}),r.a.createElement(F.a.Append,null,r.a.createElement(k.a,{variant:"outline-secondary",onClick:function(){var e=1;if(0!==ae.length){var a=ae.map((function(e){return e.objectIndex}));e=Math.max.apply(Math,Object(R.a)(a))+1}var t={objectIndex:e,fields:{name:"",note:"",postalindex:"",region:"",town:"",street:"",building:"",apartment:"",geolat:"",geolon:"",oldformat:"1"}};te((function(e){return[].concat(Object(R.a)(e),[t])}))}},r.a.createElement(h.a,{icon:y.q}))))),ae.map((function(e){return r.a.createElement(G,{key:e.objectIndex.toString(),panelData:c,objectIndex:e.objectIndex,data:ae,onObjectUpdate:oe,onObjectDelete:ce})})))),r.a.createElement(W.a.Footer,null,r.a.createElement(k.a,{variant:"primary",onClick:function(){var e,a,n,r;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=ae.map((function(e){return Z(e.fields)})),a=JSON.stringify({objects:e}),n={id:l.exitID,objects:a,timeexit:P,timereturn:B},c.next=5,s.a.awrap(f.apply(void 0,["update_exit",n].concat(o)));case 5:r=c.sent,t({type:"setUpdateRecordModal",updateRecordModalData:{show:!1}}),E({message:r,methodName:"TabLog.UpdateRecordModal.handleSave()",representError:function(e){t({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||t({type:"setInfoBox",infoBoxData:{variant:"info",text:r,show:!0}});case 9:case"end":return c.stop()}}))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(k.a,{variant:"secondary",onClick:re},"\u041e\u0442\u043c\u0435\u043d\u0430")))};var pe=function(e){var a=Object(n.useContext)(C),t=e.panelData,o=e.pointsData,c=e.paginatorData,l=e.logData,s=e.logSearchFieldsData,i=e.deleteRecordModalData,u=e.updateRecordModalData,d=function(e){a({type:"setPaginators",paginators:{tabLogPage:e}})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{data:t}),r.a.createElement("hr",null),r.a.createElement(le,{data:s}),r.a.createElement("hr",null),r.a.createElement(se,{countRows:l.countrows}),r.a.createElement("hr",null),r.a.createElement(oe,{curPage:c,perPage:l.perpage,countRows:l.countrows,onItemClick:d,onPrevClick:d,onNextClick:d,onFirstClick:d,onLastClick:d}),r.a.createElement(ue,{rowItems:l.rowitems}),r.a.createElement("hr",null),r.a.createElement(oe,{curPage:c,perPage:l.perpage,countRows:l.countrows,onItemClick:d,onPrevClick:d,onNextClick:d,onFirstClick:d,onLastClick:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(de,{data:i}),r.a.createElement(me,{panelData:t,data:u,pointsData:o}))};t(96),t(97);var fe=function(e){var a=e.data;return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:4},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.t,size:"1x"}),"\xa0\xa0\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\xa0:")),r.a.createElement(U.a,{disabled:!0,value:a.userFIO}))),r.a.createElement(g.a,{lg:8},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.a,size:"1x"}),"\xa0\xa0\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435\xa0:")),r.a.createElement(U.a,{disabled:!0,value:a.depName}))))))};t(98);var Ee=function(e){var a=Object(n.useContext)(C),t=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439: "),r.a.createElement(v.a,null,r.a.createElement(ce,{name:"userFio",size:6,label:"\u0424\u0418\u041e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",handleSearch:function(e){a({type:"setUsersSearchFields",usersSearchFields:e})},currentVal:t.userFio})))};t(99);var be=function(e){var a=e.countRows;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u0435\u0439:"),r.a.createElement(F.a,null,r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,"\u0412\u0441\u0435\u0433\u043e \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439:")),r.a.createElement(U.a,{disabled:!0,value:a,style:{maxWidth:"200px"}})))};t(100),t(101);var ve=function(e){var a=Object(n.useContext)(C),t=e.userID,o=e.userLocked,c=e.userFio,l=0===o?"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c";return r.a.createElement("tr",null,r.a.createElement("td",null,c),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement(k.a,{variant:"success",className:"sav2-opt-button",title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438",onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setUpdateUserModal",updateUserModalData:{show:!0,userID:t}});case 1:case"end":return e.stop()}}))}},r.a.createElement(h.a,{icon:y.h,size:"1x"})),r.a.createElement(q.a,{placement:"top",overlay:r.a.createElement(K.a,{id:t},l)},r.a.createElement(k.a,{variant:0===o?"info":"warning",className:"sav2-opt-button",onClick:function(){a({type:"setLockUserModal",lockUserModalData:{show:!0,userID:t,userFio:c,userLocked:o}})}},r.a.createElement(h.a,{icon:0===o?y.k:y.j,size:"1x"})))))};var ge=function(e){var a=e.rowItems.map((function(e){return r.a.createElement(ve,{key:e[0].toString(),userID:e[0].toString(),userLocked:e[1],userFio:e[2]})}));return r.a.createElement(Q.a,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0424\u0418\u041e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430"),r.a.createElement("th",{style:{textAlign:"right"}},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),r.a.createElement("tbody",null,a))};t(102);var he=function(e){var a=Object(n.useContext)(d),t=Object(n.useContext)(C),o=e.data,c=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],l=function(){t({type:"setLockUserModal",lockUserModalData:{show:!1}})},i=0===o.userLocked?"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",u=0===o.userLocked?"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: "+o.userFio:"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: "+o.userFio;return r.a.createElement(W.a,{show:o.show,onHide:l},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,null,i)),r.a.createElement(W.a.Body,null,r.a.createElement("p",null,u)),r.a.createElement(W.a.Footer,null,r.a.createElement(k.a,{variant:"primary",onClick:function(){var e,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=0===o.userLocked?"lock_user":"unlock_user",n.next=3,s.a.awrap(f.apply(void 0,[e,{id:o.userID}].concat(c)));case 3:a=n.sent,t({type:"setLockUserModal",lockUserModalData:{show:!1}}),E({message:a,methodName:"LockUserModal.handleLock()",representError:function(e){t({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||t({type:"setInfoBox",infoBoxData:{variant:"info",text:a,show:!0}});case 7:case"end":return n.stop()}}))}},0===o.userLocked?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.a.createElement(k.a,{variant:"secondary",onClick:l},"\u041e\u0442\u043c\u0435\u043d\u0430")))};t(103);var we=function(e){var a=Object(n.useContext)(d),t=Object(n.useContext)(C),o=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],c=e.data,l=Object(n.useState)({depName:"",userFio:"",userPassword:""}),m=Object(i.a)(l,2),p=m[0],b=m[1],v=function(e){var a=e.target.name,t=e.target.value;b((function(e){return Object(u.a)({},e,Object(j.a)({},a,t))}))};Object(n.useEffect)((function(){if(c.show)return function(){var e,a,n;s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.awrap(f.apply(void 0,["select_user_by_id",{id:c.userID}].concat(o)));case 2:e=r.sent,E({message:e,methodName:"TabUsers.UpdateUserModal.selectUserByID()",representError:function(e){t({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||(a=JSON.parse(e),n=a.fields,b((function(e){return Object(u.a)({},e,{depName:n.departmentnameUserUpd,userFio:n.fioUserUpd})})));case 5:case"end":return r.stop()}}))}(),function(){b((function(e){return{depName:"",userFio:"",userPassword:""}}))}}),[c.show]);var g=function(){t({type:"setUpdateUserModal",updateUserModalData:{show:!1}})};return r.a.createElement(W.a,{show:c.show,onHide:g},r.a.createElement(W.a.Header,{closeButton:!0},r.a.createElement(W.a.Title,null,"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),r.a.createElement(W.a.Body,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Group,null,r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.a,size:"1x"}),"\xa0\xa0\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435\xa0:")),r.a.createElement(U.a,{disabled:!0,value:p.depName}))),r.a.createElement(O.a.Group,null,r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.t,size:"1x"}),"\xa0\xa0\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\xa0:")),r.a.createElement(U.a,{name:"userFio",onChange:v,value:p.userFio}))),r.a.createElement(O.a.Group,null,r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,"\u041f\u0430\u0440\u043e\u043b\u044c\xa0:")),r.a.createElement(U.a,{name:"userPassword",type:"password",onChange:v,value:p.userPassword}))))),r.a.createElement(W.a.Footer,null,r.a.createElement(k.a,{variant:"primary",onClick:function(){var e,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={id:c.userID,fio:p.userFio.trim(),pass:p.userPassword,firstlogin:"1"},n.next=3,s.a.awrap(f.apply(void 0,["update_user",e].concat(o)));case 3:a=n.sent,t({type:"setUpdateUserModal",updateUserModalData:{show:!1}}),E({message:a,methodName:"TabUsers.UpdateUserModal.handleSave()",representError:function(e){t({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}})||t({type:"setInfoBox",infoBoxData:{variant:"info",text:a,show:!0}});case 7:case"end":return n.stop()}}))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(k.a,{variant:"secondary",onClick:g},"\u041e\u0442\u043c\u0435\u043d\u0430")))};var xe=function(e){var a=Object(n.useContext)(C),t=e.panelData,o=e.usersData,c=e.paginatorData,l=e.usersSearchFieldsData,s=e.lockUserModalData,i=e.updateUserModalData,u=function(e){a({type:"setPaginators",paginators:{tabUsersPage:e}})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{data:t}),r.a.createElement("hr",null),r.a.createElement(Ee,{data:l}),r.a.createElement("hr",null),r.a.createElement(be,{countRows:o.countrows}),r.a.createElement("hr",null),r.a.createElement(oe,{curPage:c,perPage:o.perpage,countRows:o.countrows,onItemClick:u,onPrevClick:u,onNextClick:u,onFirstClick:u,onLastClick:u}),r.a.createElement(ge,{rowItems:o.rowitems}),r.a.createElement("hr",null),r.a.createElement(oe,{curPage:c,perPage:o.perpage,countRows:o.countrows,onItemClick:u,onPrevClick:u,onNextClick:u,onFirstClick:u,onLastClick:u}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(he,{data:s}),r.a.createElement(we,{data:i}))};var ye=function(e){var a=Object(n.useContext)(d),t=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],o=e.panelData,c={infoBox:{variant:"info",text:"",show:!1},panelTabs:{showNewRecordTab:!0,showLogTab:!1,showUsersTab:!1},paginators:{tabLogPage:1,tabUsersPage:1},pointsData:[],newRecordData:{userid:o.userID,pointid:"1",point_description:"",time_exit:"",time_return:"",objects:[]},insertNewRecordModal:{show:!1},logSearchFields:{date:"",userFio:"",userID:"",objectName:""},logData:{countrows:0,page:0,perpage:25,rowitems:[]},deleteRecordModal:{show:!1,exitID:"0"},updateRecordModal:{show:!1,exitID:"0"},usersSearchFields:{userFio:""},usersData:{countrows:0,page:0,perpage:25,rowitems:[]},lockUserModal:{show:!1,userID:"",userFio:"",userLocked:!1},updateUserModal:{show:!1,userID:""}},l=L(c),u=Object(i.a)(l,2),m=u[0],p=u[1],b=m.infoBox,v=m.panelTabs,g=m.paginators,h=m.pointsData,w=m.newRecordData,x=m.insertNewRecordModal,y=m.logSearchFields,D=m.logData,j=m.deleteRecordModal,O=m.updateRecordModal,k=m.usersSearchFields,I=m.usersData,R=m.lockUserModal,N=m.updateUserModal;Object(n.useEffect)((function(){v.showNewRecordTab&&S()}),[v.showNewRecordTab]),Object(n.useEffect)((function(){!v.showLogTab||j.show||O.show||T()}),[v.showLogTab,g.tabLogPage,y,j,O]),Object(n.useEffect)((function(){!v.showUsersTab||R.show||N.show||F()}),[v.showUsersTab,g.tabUsersPage,k,R,N]);var M=function(e){var a,n,r;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s.a.awrap(f.apply(void 0,[e.apiMethod,e.searchParams].concat(t)));case 2:a=o.sent,n={message:a,methodName:e.methodName,representError:function(e){p({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}},E(n)||(r=JSON.parse(a),e.processResult(r));case 5:case"end":return o.stop()}}))},S=function(){var e;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={apiMethod:"select_points",searchParams:{id:"0"},methodName:"MainInspectorPanel.selectPoints()",processResult:function(e){p({type:"setPointsData",pointsData:e.points})}},a.next=4,s.a.awrap(M(e));case 4:case"end":return a.stop()}}))},T=function(){var e,a;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={page:g.tabLogPage-1,date:y.date,userfio:y.userFio,userid:y.userID,objectname:y.objectName},a={apiMethod:"select_exits",searchParams:e,methodName:"MainInspectorPanel.selectExits()",processResult:function(e){p({type:"setLogData",logData:e})}},t.next=4,s.a.awrap(M(a));case 4:case"end":return t.stop()}}))},F=function(){var e,a;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={page:g.tabUsersPage-1,userfio:k.userFio},a={apiMethod:"select_users",searchParams:e,methodName:"MainInspectorPanel.selectUsers()",processResult:function(e){p({type:"setUsersData",usersData:e})}},t.next=4,s.a.awrap(M(a));case 4:case"end":return t.stop()}}))};return r.a.createElement("div",null,r.a.createElement(C.Provider,{value:p},r.a.createElement(P,{data:v,panelData:o}),r.a.createElement("br",null),r.a.createElement(_,{data:b}),r.a.createElement("br",null),function(){var e="default";for(var a in v)v[a]&&(e=a);var t={showNewRecordTab:r.a.createElement(ee,{panelData:o,pointsData:h,newRecordData:w,insertNewRecordModalData:x}),showLogTab:r.a.createElement(pe,{panelData:o,pointsData:h,paginatorData:g.tabLogPage,logData:D,logSearchFieldsData:y,deleteRecordModalData:j,updateRecordModalData:O}),showUsersTab:r.a.createElement(xe,{panelData:o,usersData:I,paginatorData:g.tabUsersPage,usersSearchFieldsData:k,lockUserModalData:R,updateUserModalData:N}),default:r.a.createElement(ee,{panelData:o,pointsData:h,newRecordData:w,insertNewRecordModalData:x})};return t[e]||t.default}(),r.a.createElement("br",null)))};t(104);var De=function(e){var a=Object(n.useContext)(d),t=e.panelData,o=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],c=Object(n.useState)({pwd:"",pwdRepeat:"",buttonActive:!1}),l=Object(i.a)(c,2),m=l[0],p=l[1],b=m.pwdRepeat,w=m.buttonActive,x=function(e){var a=e.target,t=a.name,n=a.value;p((function(e){var a,r=!1;return"pwd"===t?r=0!==n.length&&n===e.pwdRepeat:"pwdRepeat"===t&&(r=0!==n.length&&n===e.pwd),Object(u.a)({},e,(a={},Object(j.a)(a,t,n),Object(j.a)(a,"buttonActive",r),a))}))},D=function(e){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(13!==e.charCode||!w){a.next=5;break}return a.next=4,s.a.awrap(I());case 4:R();case 5:case"end":return a.stop()}}))};function I(){var e,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={id:t.userID,fio:t.userFIO,pass:b,firstlogin:0},n.next=3,s.a.awrap(f.apply(void 0,["update_user",e].concat(o)));case 3:if(a=n.sent,E({message:a,methodName:"CreatePasswordForm.updateUser()"})){n.next=9;break}return n.abrupt("return",a);case 9:return n.abrupt("return",null);case 10:case"end":return n.stop()}}))}function R(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(f.apply(void 0,["keep_workspace",{id:"0"}].concat(o)));case 2:e=n.sent,E({message:e,methodName:"CreatePasswordForm.keepWorkspace()"})||(t=JSON.parse(e),a({type:"setPanelData",panelData:t}));case 5:case"end":return n.stop()}}))}return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(S.a,{variant:"success"},r.a.createElement(h.a,{icon:y.u,size:"lg"}),"\xa0\u041f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0439 \u0432\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0430 \u043d\u043e\u0432\u044b\u0439 (\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439) \u0434\u043b\u044f \u0441\u0432\u043e\u0435\u0439 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438.")),r.a.createElement(g.a,{lg:12},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c:"),r.a.createElement(O.a.Control,{type:"text",name:"usr",readOnly:!0,value:t.userFIO})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(O.a.Control,{type:"password",name:"pwd",onChange:x,onKeyPress:D})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c (\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e):"),r.a.createElement(O.a.Control,{type:"password",name:"pwdRepeat",onChange:x,onKeyPress:D})),r.a.createElement(k.a,{disabled:!w,variant:"primary",size:"lg",block:!0,onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(I());case 2:R();case 3:case"end":return e.stop()}}))}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")))};t(105);var je=function(e){var a=Object(n.useContext)(d),t=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],o=Object(n.useState)({id:"isuservalid",usr:"",pwd:"",grr:""}),c=Object(i.a)(o,2),l=c[0],m=c[1],p=function(e){var a=e.target.name,t=e.target.value;m((function(e){return Object(u.a)({},e,Object(j.a)({},a,t))}))},b=function(e){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(13!==e.charCode){a.next=6;break}return a.next=4,s.a.awrap(x());case 4:w(a.sent);case 6:case"end":return a.stop()}}))};function w(e){var n,r,o;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(null===e){c.next=11;break}if(!(n=JSON.parse(e)).isvalid){c.next=10;break}return c.next=5,s.a.awrap(f.apply(void 0,["load_workspace",{userid:n.userid,userrole:n.userrole}].concat(t)));case 5:r=c.sent,E({message:r,methodName:"LoginForm.loadWorkspace()"})||(o=JSON.parse(r),a({type:"setPanelData",panelData:o})),c.next=11;break;case 10:a({type:"alertInvalidCredentials"});case 11:case"end":return c.stop()}}))}function x(){var e;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(f.apply(void 0,["login",l].concat(t)));case 2:if(e=a.sent,E({message:e,methodName:"LoginForm.doLogin()"})){a.next=8;break}return a.abrupt("return",e);case 8:return a.abrupt("return",null);case 9:case"end":return a.stop()}}))}return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(S.a,{variant:"danger"},r.a.createElement(h.a,{icon:y.i,size:"lg"}),"\xa0\u0412\u0430\u0448\u0430 \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u0430.")),r.a.createElement(g.a,{lg:12},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Login:"),r.a.createElement(O.a.Control,{type:"text",name:"usr",onChange:p,onKeyPress:b})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Password:"),r.a.createElement(O.a.Control,{type:"password",name:"pwd",onChange:p,onKeyPress:b})),r.a.createElement(k.a,{variant:"primary",size:"lg",block:!0,onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(x());case 2:w(e.sent);case 4:case"end":return e.stop()}}))}},"\u0412\u0445\u043e\u0434")))};t(106),t(107);var Oe=function(e){var a=Object(n.useContext)(d),t=Object(n.useContext)(C),o=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],c=e.data,l=e.panelData,i=function(e){var a=e.target.id,n={};for(var r in c)n[r]=r===a;t({type:"setPanelTabs",panelTabs:n})};return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(M.a,{className:"flex-wrap"},r.a.createElement(k.a,{variant:"outline-secondary",active:c.showNewRecordTab,onClick:i,id:"showNewRecordTab"},"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c"),r.a.createElement(k.a,{variant:"outline-secondary",active:c.showLogTab,onClick:i,id:"showLogTab"},"\u0416\u0443\u0440\u043d\u0430\u043b"),r.a.createElement(k.a,{variant:"outline-info",onClick:function(){window.location="http://kom-es01-app25:8888/docx/"}},"\u0410\u043a\u0442 \u043e\u0431\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),(2===l.depID||3===l.depID)&&r.a.createElement(k.a,{variant:"outline-info",onClick:function(){window.location="http://kom-es01-app25:8888/acts/"}},"\u0411\u043b\u0430\u043d\u043a\u0438 \u0423\u0445\u0442\u0430"),r.a.createElement(k.a,{variant:"primary",onClick:function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(f.apply(void 0,["logout",{id:"0"}].concat(o)));case 2:e=t.sent,E({message:e,methodName:"InspectorPanel.MainMenu.logoutIsClicked()"})||a({type:"setPanelData",panelData:{panelID:"0",userID:"",userFIO:"",depID:"",depName:""}});case 5:case"end":return t.stop()}}))}},"\u0412\u044b\u0439\u0442\u0438"))))};t(108),t(109);var ke=function(e){var a=e.data;return r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:12},r.a.createElement(v.a,null,r.a.createElement(g.a,{lg:4},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.t,size:"1x"}),"\xa0\xa0\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\xa0:")),r.a.createElement(U.a,{disabled:!0,value:a.userFIO}))),r.a.createElement(g.a,{lg:8},r.a.createElement(F.a,{className:"sav2-mb-1"},r.a.createElement(F.a.Prepend,null,r.a.createElement(F.a.Text,null,r.a.createElement(h.a,{icon:y.a,size:"1x"}),"\xa0\xa0\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435\xa0:")),r.a.createElement(U.a,{disabled:!0,value:a.depName}))))))};t(110);var Ie=function(e){var a=e.data,t=Object(n.useContext)(C),o=function(e){t({type:"setLogSearchFields",logSearchFields:e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043f\u0438\u0441\u0435\u0439: "),r.a.createElement(v.a,null,r.a.createElement(ce,{name:"date",size:4,label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430:",handleSearch:o,mask:{type:"datepicker",params:{format:"dd-mm-yyyy",viewMode:"months",minViewMode:"days",language:"ru"}},currentVal:a.date}),r.a.createElement(ce,{name:"objectName",size:6,label:"\u041e\u0431\u044a\u0435\u043a\u0442 \u0432\u044b\u0445\u043e\u0434\u0430:",handleSearch:o,currentVal:a.objectName})))};var Re=function(e){var a=Object(n.useContext)(C),t=e.panelData,o=e.pointsData,c=e.paginatorData,l=e.logData,s=e.logSearchFieldsData,i=e.deleteRecordModalData,u=e.updateRecordModalData,d=function(e){a({type:"setPaginators",paginators:{tabLogPage:e}})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,{data:t}),r.a.createElement("hr",null),r.a.createElement(Ie,{data:s}),r.a.createElement("hr",null),r.a.createElement(se,{countRows:l.countrows}),r.a.createElement("hr",null),r.a.createElement(oe,{curPage:c,perPage:l.perpage,countRows:l.countrows,onItemClick:d,onPrevClick:d,onNextClick:d,onFirstClick:d,onLastClick:d}),r.a.createElement(ue,{rowItems:l.rowitems}),r.a.createElement("hr",null),r.a.createElement(oe,{curPage:c,perPage:l.perpage,countRows:l.countrows,onItemClick:d,onPrevClick:d,onNextClick:d,onFirstClick:d,onLastClick:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(de,{data:i}),r.a.createElement(me,{panelData:t,data:u,pointsData:o}))};var Ce=function(e){var a=Object(n.useContext)(d),t=[function(){a({type:"setIsLoad",isLoad:!0})},function(){a({type:"setIsLoad",isLoad:!1})}],o=e.panelData,c={infoBox:{variant:"info",text:"",show:!1},panelTabs:{showNewRecordTab:!0,showLogTab:!1,showUsersTab:!1},paginators:{tabLogPage:1,tabUsersPage:1},pointsData:[],newRecordData:{userid:o.userID,pointid:"1",point_description:"",time_exit:"",time_return:"",objects:[]},insertNewRecordModal:{show:!1},logSearchFields:{date:"",userFio:"",userID:o.userID.toString(),objectName:""},logData:{countrows:0,page:0,perpage:25,rowitems:[]},deleteRecordModal:{show:!1,exitID:"0"},updateRecordModal:{show:!1,exitID:"0"}},l=L(c),u=Object(i.a)(l,2),m=u[0],p=u[1],b=m.infoBox,v=m.panelTabs,g=m.paginators,h=m.pointsData,w=m.newRecordData,x=m.insertNewRecordModal,y=m.logSearchFields,D=m.logData,j=m.deleteRecordModal,O=m.updateRecordModal;Object(n.useEffect)((function(){v.showNewRecordTab&&I()}),[v.showNewRecordTab]),Object(n.useEffect)((function(){!v.showLogTab||j.show||O.show||R()}),[v.showLogTab,g.tabLogPage,y,j,O]);var k=function(e){var a,n,r;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s.a.awrap(f.apply(void 0,[e.apiMethod,e.searchParams].concat(t)));case 2:a=o.sent,n={message:a,methodName:e.methodName,representError:function(e){p({type:"setInfoBox",infoBoxData:{variant:"danger",text:e,show:!0}})}},E(n)||(r=JSON.parse(a),e.processResult(r));case 5:case"end":return o.stop()}}))},I=function(){var e;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={apiMethod:"select_points",searchParams:{id:"0"},methodName:"InspectorPanel.selectPoints()",processResult:function(e){p({type:"setPointsData",pointsData:e.points})}},a.next=4,s.a.awrap(k(e));case 4:case"end":return a.stop()}}))},R=function(){var e,a;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={page:g.tabLogPage-1,date:y.date,userfio:y.userFio,userid:y.userID,objectname:y.objectName},a={apiMethod:"select_exits",searchParams:e,methodName:"InspectorPanel.selectExits()",processResult:function(e){p({type:"setLogData",logData:e})}},t.next=4,s.a.awrap(k(a));case 4:case"end":return t.stop()}}))};return r.a.createElement("div",null,r.a.createElement(C.Provider,{value:p},r.a.createElement(Oe,{data:v,panelData:o}),r.a.createElement("br",null),r.a.createElement(_,{data:b}),r.a.createElement("br",null),function(){var e="default";for(var a in v)v[a]&&(e=a);var t={showNewRecordTab:r.a.createElement(ee,{panelData:o,pointsData:h,newRecordData:w,insertNewRecordModalData:x}),showLogTab:r.a.createElement(Re,{panelData:o,pointsData:h,paginatorData:g.tabLogPage,logData:D,logSearchFieldsData:y,deleteRecordModalData:j,updateRecordModalData:O}),default:r.a.createElement(ee,{panelData:o,pointsData:h,newRecordData:w,insertNewRecordModalData:x})};return t[e]||t.default}(),r.a.createElement("br",null)))};var Ne=function(e){var a=e.wsID,t=e.panelData;return r.a.createElement(b.a,{className:"sav2-main-cont"},function(e){switch(e){case"-2":return r.a.createElement(De,{panelData:t});case"-1":return r.a.createElement(je,null);case"0":return r.a.createElement(I,null);case"1":return r.a.createElement(ye,{panelData:t});case"3":return r.a.createElement(Ce,{panelData:t});default:return null}}(a))};var Le=function(e){var a=p({isLoad:!0,panelData:{panelID:null,userID:"",userFIO:"",depID:"",depName:""}}),t=Object(i.a)(a,2),o=t[0],c=t[1],l=o.isLoad,u=o.panelData,m=[function(){c({type:"setIsLoad",isLoad:!0})},function(){c({type:"setIsLoad",isLoad:!1})}];return Object(n.useEffect)((function(){!function(){var e,a;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(f.apply(void 0,["keep_workspace",{id:"0"}].concat(m)));case 2:e=t.sent,E({message:e,methodName:"App.keepWorkspace()"})||(a=JSON.parse(e),c({type:"setPanelData",panelData:a}));case 5:case"end":return t.stop()}}))}()}),[]),r.a.createElement("div",null,r.a.createElement(d.Provider,{value:c},r.a.createElement(x,null),r.a.createElement(Ne,{wsID:u.panelID,panelData:u}),r.a.createElement(D,{isLoading:l})))};c.a.render(r.a.createElement(Le,null),document.getElementById("root"))}]),[[52,1,2]]]);
//# sourceMappingURL=main.b32b19fc.chunk.js.map